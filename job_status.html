<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Job Status</title>
<style>
body{font-family:Arial;background:#f4f6f8;padding:20px}
.header{
  background:#1f3c88;color:#fff;
  padding:14px;border-radius:10px;
  display:flex;align-items:center;gap:12px
}
.table{
  margin-top:20px;
  background:#fff;border-radius:12px;
  overflow:hidden
}
.row,.head{
  display:grid;
  grid-template-columns: 160px 120px 1fr 120px 100px;
  padding:12px
}
.head{background:#1f3c88;color:#fff;font-weight:bold}
.row{border-bottom:1px solid #eee}
.empty{padding:40px;text-align:center;color:#888}
</style>
</head>

<body>

<div class="header">
  <button onclick="location.href='index.html'">‚¨Ö Home</button>
  <b>Technician ‚Äì Job Status</b>
</div>

<div class="table">
  <div class="head">
    <div>WO ID</div>
    <div>Asset</div>
    <div>Problem</div>
    <div>Priority</div>
    <div>Status</div>
  </div>
  <div id="list"></div>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbzRfWNIS9k7psXzY8Zi_YThivvrvEtzSx4RfV8_GeeRQQ_1yRN3DA6R6E3VDFU5xJAmHQ/exec";

fetch(API + "?mode=jobStatus")
.then(r=>r.json())
.then(rows=>{
  const box = document.getElementById("list");
  if(!rows.length){
    box.innerHTML = `<div class="empty">üéâ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</div>`;
    return;
  }

  rows.forEach(r=>{
    const div=document.createElement("div");
    div.className="row";
    div.innerHTML=`
      <div>${r.wo_id}</div>
      <div>${r.asset_id}</div>
      <div>${r.problem}</div>
      <div>${r.priority}</div>
      <div>${r.status}</div>
    `;
    box.appendChild(div);
  });
})
.catch(()=>{
  document.getElementById("list").innerHTML =
    `<div class="empty">‚ùå Load failed</div>`;
});
</script>

</body>
</html>
